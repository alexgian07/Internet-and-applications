# Internet-and-applications
Final project for "Internet and applications" course


Alex Giannoulis  - 03115199

## Χρησιμοποίηση δοθέντων Web services και συνδυασμός τους
Θα δημιουργήσω ένα restful API το οποίο θα λαμβάνει δεδομένα απο τα δοθέντα Web Services ώστε στην συνέχεια να τα επεξεργάζομαι και να παραθέτω χρήσιμες πληροφορίες.

Πρόκειται για μια CLI εφαρμογή  με 3 βασικές χρήσεις :



1 ) Ο χρήστης θα εισάγει τις συντεταγμένες του και θα χρησιμοποιώ το web service που μας δίνεται ( της itravel ) και θα βρίσκω τις 5 πιο κοντινές στάσεις σε αυτόν ( τόσο τις συντεταγμένες ,όσο και το όνομα και το device id) ( οπότε ουσιαστικά θα χρησιμοποιώ τα 2 πρώτα web services αλλά και το end point που μας δίνει όλα τα devices : http://feed.opendata.imet.gr:23577/itravel/devices ) .


2 ) o χρήστης θα εισάγει στάση ( είτε με device id είτε με όνομα ) και θα εμφανίζονται όλα τα paths που εκκινούν ή τερματίζουν  απο εκει ( τόσο το path id,όσο και  το όνομα του path ).
Σίγουρα θα χρειαστεί να κάνω χρήση του endpoint που εμφανίζονται όλα τα paths ,δηλαδή του : http://feed.opendata.imet.gr:23577/itravel/paths ,καθώς και κάποιων web services  .
Σημείωση : Η συγκεκριμένη προδιαγραφή άλλαξε από "o χρήστης θα εισάγει στάση ( είτε με device id είτε με όνομα ) και θα εμφανίζονται όλα τα paths που περνάνε απο εκεί " μετά απο σχετική άδεια που πήρα με email ( λόγω μη αντιστοίχισης συντεταγμένων των polyline σε στάσεις )


3 ) Εμφάνιση του polyline για δοθέν path id ή path name  ( απλή υλοποίηση δηλαδή με βάση κυρίως  το end point που παίρνουμε απο το web service 3 )

Ενδέχεται να προσθέσω συμπληρωματικές λειτουργίες , αν προλάβω..

**Extra: Υλοποίησα ένα απλό front-end**

Θα γίνει ως επι το πλείστον χρήση nodejs για την υλοποίηση.Συγκεκριμένα, θα χρησιμοποιήσω τις βιβλιοθήκες express και commander για το api ( server)  και το cli , αντίστοιχα .

Τα http requests για το back-end,υλοποιήθηκαν με χρήση XMLHttpRequest

*Οδηγίες*

## Στήσιμο του back-end
Ενώ είμαστε στο directory του back-end σε ένα command-line γράφουμε :
```
npm install
```
(για τα dependancies απο modules)
```
npm run start
```
( για την εκκίνηση του server)


## Στήσιμο του CLI
Ενώ είμαστε στο directory του cli σε ένα command-line γράφουμε :
```
npm install
```
(για τα dependancies απο modules)
```
npm link
```
(για να μπορεί να χρησιμοποιηθεί η εφαρμογή alex_app  απο οποιοδήποτε directory , σε τερματικό )

## Στήσιμο του front-end
Απο το directory του front-end ανοίγουμε με κάποιον browser  το αρχείο front-end.html

Προσοχή : Πρέπει να τρέχει το back-end  ( όπως και στο cli βέβαια).



## Σύντομη περιγραφή της δομής του κώδικα

Ο κώδικας είναι χωρισμένος σε 3 διακριτά μέρη. Αυτά προφανώς ειναι το back-end ( server), το cli ( client) αλλά και το front-end που τελικά υλοποίησα.Όπως αναφέρθηκε ,έκανα χρήση nodejs για το back-end και το cli.Το back-end λοιπόν,ακολουθεί μια κλασική δομή , όπου το api  εκκινεί απο το αρχείο server.js .Στην συνέχεια, ανάλογα με το http request που θα έρθει απο κάποιον client,  το αρχείο routes.js αναλαμβάνει να οδηγήσει την ροή του κώδικα στον κατάλληλο χειρισμό του  εκάστοτε αιτήματος.Ο χειρισμός αυτός, γίνεται  απο τους controllers.Οι controllers,είναι ορισμένοι στο ομώνυμο αρχείο και χωρίζονται ουσιαστικά σε συναρτήσεις, μια για κάθε περίπτωση.Εκεί, γίνονται τα κατάλληλα http requests προς τα δοθέντα web services και το site της iTravel. Με την βοήθεια απλών διαδικασίων ,κάποιες απο τις οποίες ορίζονται στο αρχείο generalUtilities,js , επεξεργάζομαι τα δεδομένα και "σερβίρεται" στον χρήστη η απάντηση.

Η υλοποίηση του cli είναι ιδιαίτερα απλή.Το αρχείο index.js αναλαμβάνει να δημιουργήσει την δομή των επιλογών που προσφέρονται. Περιέχει ουσιαστικά τον ορισμό όλων των παραμέτρων και των επιλογών αυτών ,για την εφαρμογή alex_app. Ο χειρισμός, στην κάθε περίπτωση γίνεται απο τους handlers. Δημιούργησα έναν handler για κάθε περίπτωση,μια συνάρτηση ουσιαστικα  που εκτελείται και μεταφράζει τις παραμέτρους που δίνονται , σε  http requests στο back-end του alex_app.

Τέλος , το front-end αποτελείται απο το βασικό ομώνυμο html αρχείο αλλά και τα συνοδευτικά myscripts.js και mstyle.css  .









 **Χρήση:**

Για την χρήση του CLI πληκτρολογούμε alex_app σε κάποιο τερματικό ( είτε και την επιλογή --help/-h_)  ώστε να εμφανιστούν αναλυτικά οι διαθέσιμες επιλογές. Παραδείγματα χρήσης υπάρχουν τόσο στο βίντεο-tutorial,όσο και στην παρουσίαση powerpoint.Παρακάτω παραθέτω ενδεικτικά κάποια:

ex.  alex_app show_paths_for_device_name --device_name "iTravel-1-V. Olgas"

ex. alex_app find_closest_devices --lat 40.647450413 --lon 22.9352212

ex. alex_app show_polyline_for_path_id --path_id 12

Για την χρήση του front end,όπως φαίνεται απο την δομή του interface ,πληκτρολογούμε την παράμετρο της επιλογής μας στο αντίστοιχο  πεδίο,κάνουμε confirm την επιλογή μας και στο τέλος χρησιμοποιούμε την επιλογή ,ώστε τα αποτελέσματα να εμφανιστούν σε ένα νέο παράθυρο ( tab)
